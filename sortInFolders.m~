clear all
clc

pathRead = '/home/exs/Videos/vidsRRTC-RRTSunrestrOnlyMovements/'; %char array
nameStore = 'iplanRvidsDatabase'
if ~exist(fullfile(pathRead,'..',),'dir')
   mkdir(pathIter)
end
files = dir(pathRead); %careful to the capital V in Videos
fileNames = {files.name}'; %all names are char array
fileNames(1:2) = [];
clear files;

filesStructCellArray = cell(0,1);
for i=1:1 %numel(fileNames)
   stru = struct();
   stru.name = fileNames{i};
   
   splittedCellArray = strsplit(stru.name,'__')
   
   stru.jointStatus = splittedCellArray{1};
   countdownChar = splittedCellArray{2}
   stru.countdown = str2num(countdownChar(10:end));
   queryChar = splittedCellArray{3};
   stru.query = str2num(queryChar(12:end));
   stru.planner =  splittedCellArray{4};
   stru.metric =  splittedCellArray{5};
   if numel(splittedCellArray) == 6
       runChar = splittedCellArray{6};
       stru.run = str2num(runChar(5:end-4));
   else %numel(splittedCellArray) == 7
       acceptanceChar = splittedCellArray{6};
       stru.acceptance = acceptanceChar(12:end);
       runChar = splittedCellArray{7};
       stru.run = str2num(runChar(5:end-4));
   end
   
   filesStructCellArray{i,1} = stru;
   
   
   source = [path,filesStructCellArray{i}.name]
   if numel(splittedCellArray) == 6
       destinationElems = {filesStructCellArray{i}.metric,...
                           filesStructCellArray{i}.jointStatus,...
                           filesStructCellArray{i}.planner,...
                           ['query',num2str(filesStructCellArray{i}.query)],... %num2str actually converts to char array
                           ['timeout',num2str(filesStructCellArray{i}.countdown)]};     
   else %numel(splittedCellArray) == 7
       destinationElems = {filesStructCellArray{i}.metric,...
                           filesStructCellArray{i}.jointStatus,...
                           filesStructCellArray{i}.acceptance,...
                           filesStructCellArray{i}.planner,...
                           ['query',num2str(filesStructCellArray{i}.query)],... %num2str actually converts to char array
                           ['timeout',num2str(filesStructCellArray{i}.countdown)]};
   end
   
   toMaybeCreate = destinationElems;
   pathIter = path;
   for j=1:numel(toMaybeCreate)
       pathIter = fullfile(pathIter, toMaybeCreate{j});
       if ~exist(pathIter,'dir')
           mkdir(pathIter)
       end
   end
   
   destination = fullfile(pathIter,filesStructCellArray{i}.name)
   
   if exist(destination) ; rm destination ; end
   
   %movefile(source,destination)
end